#
# Environment Variables for Hoppscotch Docker Compose Setup
#
# Fill in the values for each variable below.
# Do NOT enclose the values in quotes.
#

#This version of env loads up the admin dashboard but has problems with gauth

# --- PostgreSQL Database Configuration -- -
# These credentials must match the ones used in the `postgres` service in the docker-compose.yml file.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=hoppscotch
POSTGRES_PORT=5432

# This is the full connection string for the Hoppscotch backend to connect to the database.
# The format is: postgresql://<user>:<password>@<host>:<port>/<database>
# The host `postgres` refers to the service name in the docker-compose.yml file.
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/hoppscotch

# --- Application Secrets -- -
# These should be long, random, and secret strings. You can generate them using a password manager. The length must be 32 and avoid symbols as it can mess up with secret parsing. 

JWT_SECRET=<your-jwt-secret>
SESSION_SECRET=<your-session-secret>
DATA_ENCRYPTION_KEY=<your-data-enc-key>

ACCESS_TOKEN_VALIDITY=<your-access-token-validity>
REFRESH_TOKEN_VALIDITY=<your-refresh-token-validity>
MAGIC_LINK_TOKEN_VALIDITY=<your-magic-link-token-validity>
TOKEN_SALT_COMPLEXITY=<your-token-salt-complexity>

# --- Hoppscotch Instance URLs -- -
# Replace 'localhost' with your actual domain if you are deploying to a server.
# Make sure there is no trailing slash '/'.

ENABLE_SUBPATH_BASED_ACCESS=true

# Frontend and Base Urls
HOPP_AIO_ALTERNATE_PORT=81
VITE_SHORTCODE_BASE_URL=http://<your-frontend-domain>
VITE_BASE_URL=http://<your-frontend-domain>
VITE_ADMIN_URL=http://<your-frontend-domain>/admin
REDIRECT_URL=http://<your-frontend-domain>
# Backend Urls
VITE_BACKEND_GQL_URL=http://<your-backend-domain>/graphql
VITE_BACKEND_WS_URL=ws://<your-backend-domain>/graphql
VITE_BACKEND_API_URL=http://<your-backend-domain>/v1

# --- CORS Configuration (CRITICAL FIX) -- -
# This variable is required by the backend to prevent crashes.
# It lists the domains that are allowed to make requests to the Hoppscotch API.
# It should include your frontend, admin, and backend URLs.
WHITELISTED_ORIGINS=<other-domains-if-needed>,http://<your-frontend-domain>,app://<your-frontend-domain>,http://<your-backend-domain>,app://<your-backend-domain>
MAILER_SMTP_ENABLE=false

# --- Google OAuth Provider Configuration -- -
# You must get these credentials from the Google Cloud Console for your project.
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create an "OAuth client ID".
# 3. Application type: "Web application".
# 4. Add the callback URL below to the "Authorized redirect URIs".

# This variable tells Hoppscotch to only show the "Login with Google" button.
VITE_ALLOWED_AUTH_PROVIDERS=GOOGLE

# Your Client ID and Secret from Google Cloud Console.      - postgres_data:/var/lib/postgresql/data

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_SCOPE=email,profile

# This is the URL Google will redirect back to after successful authentication.
# It MUST be added to your OAuth client ID configuration in the Google Cloud Console.
# If you are deploying to a domain, replace `localhost` with your domain name.
GOOGLE_CALLBACK_URL=http://<your-backend-domain>/v1/auth/google/callback

# --- Traefik Configuration -- -
TRAEFIK_HOST_UI=<your-frontend-domain>
TRAEFIK_HOST_API=<your-backend-domain>

# --- Docker Network Configuration -- -
SUBNET_CIDR=<your-subnet-cidr>
POSTGRES_DB_IP=<your-postgres-db-ip>
HOPPSCOTCH_MIGRATOR_IP=<your-hoppscotch-migrator-ip>
HOPPSCOTCH_MAIN_IP=<your-hoppscotch-main-ip>
HOPPSCOTCH_NGINX_IP=<your-hoppscotch-nginx-ip>