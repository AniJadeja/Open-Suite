#
# Environment Variables for Hoppscotch Docker Compose Setup
#
# Fill in the values for each variable below.
# Do NOT enclose the values in quotes.
#

#This version of env loads up the admin dashboard but has problems with gauth

# --- PostgreSQL Database Configuration -- -
# These credentials must match the ones used in the `postgres` service in the docker-compose.yml file.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<your-postgres-password>
POSTGRES_DB=hoppscotch
POSTGRES_PORT=5432

# This is the full connection string for the Hoppscotch backend to connect to the database.
# The format is: postgresql://<user>:<password>@<host>:<port>/<database>
# The host `postgres` refers to the service name in the docker-compose.yml file.
DATABASE_URL=postgresql://postgres:<your-postgres-password>@postgres:5432/hoppscotch

# --- Application Secrets -- -
# These should be long, random, and secret strings. You can generate them using a password manager. The length must be 32 and avoid symbols as it can mess up with secret parsing. 
JWT_SECRET=<your-secret>
SESSION_SECRET=<your-secret>
DATA_ENCRYPTION_KEY=<your-data-enc-secret>

ACCESS_TOKEN_VALIDITY=86400000
REFRESH_TOKEN_VALIDITY=604800000
MAGIC_LINK_TOKEN_VALIDITY=3
TOKEN_SALT_COMPLEXITY=10

# --- Hoppscotch Instance URLs -- -
# Replace 'localhost' with your actual domain if you are deploying to a server.
# Make sure there is no trailing slash '/'.

ENABLE_SUBPATH_BASED_ACCESS=true

# Frontend and Base Urls
HOPP_AIO_ALTERNATE_PORT=81
VITE_SHORTCODE_BASE_URL=http://hopp-ui.localhost
VITE_BASE_URL=http://hopp-ui.localhost
VITE_ADMIN_URL=http://hopp-ui.localhost/admin
REDIRECT_URL=http://hopp-ui.localhost
# Backend Urls
VITE_BACKEND_GQL_URL=http://hopp-api.localhost/graphql
VITE_BACKEND_WS_URL=ws://hopp-api.localhost/graphql
VITE_BACKEND_API_URL=http://hopp-api.localhost/v1

# --- CORS Configuration (CRITICAL FIX) -- -
# This variable is required by the backend to prevent crashes.
# It lists the domains that are allowed to make requests to the Hoppscotch API.
# It should include your frontend, admin, and backend URLs.
WHITELISTED_ORIGINS=http://localhost:3000,http://localhost:3100,http://localhost:3170,http://hopp-ui.localhost,app://hopp-ui.localhost,http://hopp-api.localhost,app://hopp-api.localhost
MAILER_SMTP_ENABLE=false

# --- Google OAuth Provider Configuration -- -
# You must get these credentials from the Google Cloud Console for your project.
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create an "OAuth client ID".
# 3. Application type: "Web application".
# 4. Add the callback URL below to the "Authorized redirect URIs".

# This variable tells Hoppscotch to only show the "Login with Google" button.
VITE_ALLOWED_AUTH_PROVIDERS=GOOGLE

# Your Client ID and Secret from Google Cloud Console.      - postgres_data:/var/lib/postgresql/data

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_SCOPE=email,profile

# This is the URL Google will redirect back to after successful authentication.
# It MUST be added to your OAuth client ID configuration in the Google Cloud Console.
# If you are deploying to a domain, replace `localhost` with your domain name.
GOOGLE_CALLBACK_URL=http://hopp-api.localhost/v1/auth/google/callback

# --- Traefik Configuration -- -
TRAEFIK_HOST_UI=hopp-ui.localhost
TRAEFIK_HOST_API=hopp-api.localhost

# --- Docker Network Configuration -- -
SUBNET_CIDR=172.16.238.0/24
POSTGRES_DB_IP=172.16.238.3
HOPPSCOTCH_MIGRATOR_IP=172.16.238.4
HOPPSCOTCH_MAIN_IP=172.16.238.5
HOPPSCOTCH_NGINX_IP=172.16.238.6